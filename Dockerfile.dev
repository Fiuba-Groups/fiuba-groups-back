# Development Dockerfile - keeps source code and gradle for development
FROM eclipse-temurin:21-jdk-jammy

WORKDIR /app

# Install gradle wrapper and dependencies
COPY gradlew .
COPY gradle ./gradle
COPY build.gradle .
COPY settings.gradle .

# Make gradle wrapper executable
RUN chmod +x ./gradlew

# Download dependencies
RUN ./gradlew dependencies --refresh-dependencies

# Copy source code (will be overridden by volume mount)
COPY src ./src

# Expose port
EXPOSE 8080

# Default command for development
CMD ["./gradlew", "bootRun"]